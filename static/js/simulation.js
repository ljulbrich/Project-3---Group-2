const searchBox = document.getElementById('search-main');
searchBox.addEventListener('keypress', (event) => 
{
    if (event.key === 'Enter') 
    {
    // Call a function to submit the form (using Javascript)
    submitSearch();
    }
});

//what actually happens after Enter is pressed
function submitSearch() 
{
  const searchQuery = document.getElementById('search-main').value;
  //better do validation check here to avoid bad input
  if (searchQuery)
  {
    window.location.href = `/${searchQuery}`;  
  }
}

function lineChart(name, x, high, low)
{
    var trace1 = {
    type: "scatter",
    mode: "lines",
    name: `${name} high`,
    x: x,
    y: high,
    line: {color: '#17BECF'}
    }

    var trace2 = {
      type: "scatter",
      mode: "lines",
      name: `${name} low`,
      x: x,
      y: low,
      line: {color: '#AD0B00'}
    }

    var data = [trace1, trace2];

    var layout = {
    title: `This graph is generated by the past 12 months data of ${name}`,
    xaxis: {
      autorange: true,
      range: [x[0], x[x.length-1]],
      rangeselector: {buttons: [
          {
            count: 1,
            label: '1m',
            step: 'month',
            stepmode: 'backward'
          },
          {
            count: 6,
            label: '6m',
            step: 'month',
            stepmode: 'backward'
          },
          {step: 'all'}
        ]},
      rangeslider: {range: [x[0], x[x.length-1]]},
      type: 'date'
    },
    yaxis: {
      autorange: true,
      range: [Math.min(low), Math.max(high)],
      type: 'linear'
    }
    };

    Plotly.newPlot('line-chart', data, layout);
}
